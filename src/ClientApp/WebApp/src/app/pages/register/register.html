<div class="register-container">
  <mat-card class="register-card">
    <mat-card-header>
      <mat-card-title>{{ 'register.title' | translate }}</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      @if (successMessage) {
        <div class="success-message">{{ successMessage }}</div>
      }
      
      @if (errorMessage) {
        <div class="error-message">{{ errorMessage }}</div>
      }
      
      @if (getFormError()) {
        <div class="error-message">{{ getFormError() }}</div>
      }
      
      <form [formGroup]="registerForm" (ngSubmit)="doRegister()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'register.username' | translate }}</mat-label>
          <input matInput formControlName="username" type="text" autocomplete="username">
          @if (username.invalid && username.touched) {
            <mat-error>{{ getValidatorMessage(username) }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'register.email' | translate }}</mat-label>
          <input matInput formControlName="email" type="email" autocomplete="email">
          @if (email.invalid && email.touched) {
            <mat-error>{{ getValidatorMessage(email) }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'register.phoneNumber' | translate }}</mat-label>
          <input matInput formControlName="phoneNumber" type="tel" autocomplete="tel">
          @if (phoneNumber.invalid && phoneNumber.touched) {
            <mat-error>{{ getValidatorMessage(phoneNumber) }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'register.password' | translate }}</mat-label>
          <input matInput formControlName="password" type="password" autocomplete="new-password">
          @if (password.invalid && password.touched) {
            <mat-error>{{ getValidatorMessage(password) }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'register.confirmPassword' | translate }}</mat-label>
          <input matInput formControlName="confirmPassword" type="password" autocomplete="new-password">
          @if (confirmPassword.invalid && confirmPassword.touched) {
            <mat-error>{{ getValidatorMessage(confirmPassword) }}</mat-error>
          }
        </mat-form-field>

        <div class="button-group">
          <button mat-raised-button color="primary" type="submit" [disabled]="isLoading || registerForm.invalid">
            {{ 'register.submit' | translate }}
          </button>
          <button mat-button type="button" (click)="goToLogin()">
            {{ 'register.backToLogin' | translate }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
